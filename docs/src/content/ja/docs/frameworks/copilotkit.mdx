---
title: "CopilotKitã¨ã®ä½¿ç”¨"
description: "MastraãŒCopilotKitã®AGUIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã©ã®ã‚ˆã†ã«æ´»ç”¨ã—ã¦ã„ã‚‹ã‹ã€ãã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«ã©ã®ã‚ˆã†ã«æ´»ç”¨ã§ãã‚‹ã‹ã‚’å­¦ã³ã¾ã—ã‚‡ã†"
---

import { Tabs } from "nextra/components";
import Image from "next/image";

# React ã§ CopilotKit ã‚’ä½¿ç”¨ã™ã‚‹

CopilotKitã¯ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªAIã‚³ãƒ‘ã‚¤ãƒ­ãƒƒãƒˆã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ç´ æ—©ãçµ±åˆã™ã‚‹ãŸã‚ã®Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æä¾›ã—ã¾ã™ã€‚
Mastraã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€åŒæ–¹å‘ã®çŠ¶æ…‹åŒæœŸã¨ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªUIã‚’å‚™ãˆãŸé«˜åº¦ãªAIã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã§ãã¾ã™ã€‚

## Mastraãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹

`mastra` CLIã‚’ä½¿ç”¨ã—ã¦æ–°ã—ã„Mastraãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã¾ã™ï¼š

<Tabs items={["npx", "npm", "yarn", "pnpm"]}>
  <Tabs.Tab>
    ```bash copy
    npx create-mastra@latest
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    npm create mastra
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    yarn create mastra
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    pnpm create mastra
    ```
  </Tabs.Tab>
</Tabs>

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹ç¯‰æ™‚ã«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¾‹ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€å¤©æ°—ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæä¾›ã•ã‚Œã¾ã™ã€‚

è©³ç´°ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã«ã¤ã„ã¦ã¯ã€[ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¬ã‚¤ãƒ‰](/docs/getting-started/installation)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## åŸºæœ¬çš„ãªã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Mastraã¨CopilotKitã‚’çµ±åˆã™ã‚‹ã«ã¯ã€ä¸»ã«2ã¤ã®ã‚¹ãƒ†ãƒƒãƒ—ãŒã‚ã‚Šã¾ã™ï¼šãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¨­å®šã§ã™ã€‚

<Tabs items={["npm", "yarn", "pnpm"]}>
  <Tabs.Tab>
    ```bash copy
    npm install @copilotkit/runtime
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    yarn add @copilotkit/runtime
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    pnpm add @copilotkit/runtime
    ```
  </Tabs.Tab>
</Tabs>

## ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

Mastraã®ã‚«ã‚¹ã‚¿ãƒ APIãƒ«ãƒ¼ãƒˆã‚’æ´»ç”¨ã—ã¦ã€CopilotKitã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’Mastraã‚µãƒ¼ãƒãƒ¼ã«è¿½åŠ ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®çµ±åˆã§ã¯ã€`MastraClient`ã‚’ä½¿ç”¨ã—ã¦Mastraã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’CopilotKitã®AGUIå½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚

<Tabs items={["npm", "yarn", "pnpm"]}>
  <Tabs.Tab>
    ```bash copy
    npm install @mastra/client-js
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    yarn add @mastra/client-js
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    pnpm add @mastra/client-js
    ```
  </Tabs.Tab>
</Tabs>

æ¬¡ã«ã€CopilotKitç”¨ã®ã‚«ã‚¹ã‚¿ãƒ APIãƒ«ãƒ¼ãƒˆã§Mastraã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’æ›´æ–°ã—ã¾ã—ã‚‡ã†ã€‚

```typescript copy
import { Mastra } from "@mastra/core/mastra";
import { PinoLogger } from "@mastra/loggers";
import { LibSQLStore } from "@mastra/libsql";
import { registerApiRoute } from "@mastra/core/server";
import {
  CopilotRuntime,
  copilotRuntimeNodeHttpEndpoint,
  ExperimentalEmptyAdapter,
} from "@copilotkit/runtime";
import { MastraClient } from "@mastra/client-js";
import { weatherAgent } from "./agents";

const serviceAdapter = new ExperimentalEmptyAdapter();

export const mastra = new Mastra({
  agents: { weatherAgent },
  storage: new LibSQLStore({
    // stores telemetry, evals, ... into memory storage,
    // if you need to persist, change to file:../mastra.db
    url: ":memory:",
  }),
  logger: new PinoLogger({
    name: "Mastra",
    level: "info",
  }),
  server: {
    apiRoutes: [
      registerApiRoute("/copilotkit", {
        method: `POST`,
        handler: async (c) => {
          // N.B. Current integration leverages MastraClient to fetch AGUI.
          // Future versions will support fetching AGUI from mastra context.
          const client = new MastraClient({
            baseUrl: "http://localhost:4111",
          });

          const runtime = new CopilotRuntime({
            agents: await client.getAGUI({ resourceId: "weatherAgent" }),
          });

          const handler = copilotRuntimeNodeHttpEndpoint({
            endpoint: "/copilotkit",
            runtime,
            serviceAdapter,
          });

          return handler.handle(c.req.raw, {});
        },
      }),
    ],
  },
});
```

ã“ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã«ã‚ˆã‚Šã€Mastraã‚µãƒ¼ãƒãƒ¼ã§CopilotKitãŒå®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚`mastra dev`ã‚³ãƒãƒ³ãƒ‰ã§Mastraã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã§ãã¾ã™ã€‚

## UIã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

CopilotKitã®Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ï¼š

<Tabs items={["npm", "yarn", "pnpm"]}>
  <Tabs.Tab>
    ```bash copy
    npm install @copilotkit/react-core @copilotkit/react-ui
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    yarn add @copilotkit/react-core @copilotkit/react-ui
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```bash copy
    pnpm add @copilotkit/react-core @copilotkit/react-ui
    ```
  </Tabs.Tab>
</Tabs>

æ¬¡ã«ã€CopilotKitã®Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«è¿½åŠ ã—ã¾ã™ã€‚

```jsx copy
import { CopilotChat } from "@copilotkit/react-ui";
import { CopilotKit } from "@copilotkit/react-core";
import "@copilotkit/react-ui/styles.css";

export function CopilotKitComponent() {
  return (
    <CopilotKit
      runtimeUrl="http://localhost:4111/copilotkit"
      agent="weatherAgent"
    >
      <CopilotChat
        labels={{
          title: "Your Assistant",
          initial: "Hi! ğŸ‘‹ How can I assist you today?",
        }}
      />
    </CopilotKit>
  );
}
```

ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã—ã¦ã€æœªæ¥ã®æ§‹ç¯‰ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼

<br />

<Image
  className="rounded-lg"
  src="/image/copilotkit/cpkoutput.jpg"
  alt="CopilotKitå‡ºåŠ›"
  width={700}
  height={700}
/>

## å‚è€ƒæ–‡çŒ®

- [CopilotKit ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.copilotkit.ai)
- [CopilotKitã‚’ä½¿ç”¨ã—ãŸReact Hooks](https://docs.copilotkit.ai/reference/hooks/useCoAgent)
