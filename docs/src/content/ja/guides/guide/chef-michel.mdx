---
title: "AIã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®æ§‹ç¯‰ | Mastraã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰"
description: åˆ©ç”¨å¯èƒ½ãªé£Ÿæã§æ–™ç†ã‚’ä½œã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’æ”¯æ´ã™ã‚‹Mastraã§ã®ã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæˆã‚¬ã‚¤ãƒ‰ã€‚
---

import { Steps } from "nextra/components";
import YouTube from "@/components/youtube";

# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰ï¼šã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®æ§‹ç¯‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹æŒã¡ã®é£Ÿæã§æ–™ç†ã‚’ä½œã‚‹ã®ã‚’æ‰‹ä¼ã†ã€Œã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä½œæˆæ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

<YouTube id="_tZhOqHCrF0" />

## å‰ææ¡ä»¶

- Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- MastraãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨: `npm install @mastra/core`

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹

<Steps>
### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®šç¾©ã™ã‚‹

æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ« `src/mastra/agents/chefAgent.ts` ã‚’ä½œæˆã—ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å®šç¾©ã—ã¾ã™ï¼š

```ts copy filename="src/mastra/agents/chefAgent.ts"
import { openai } from "@ai-sdk/openai";
import { Agent } from "@mastra/core/agent";

export const chefAgent = new Agent({
  name: "chef-agent",
  instructions:
    "You are Michel, a practical and experienced home chef" +
    "You help people cook with whatever ingredients they have available.",
  model: openai("gpt-4o-mini"),
});
```

---

## ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã« `.env` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€OpenAI APIã‚­ãƒ¼ã‚’è¿½åŠ ã—ã¾ã™ï¼š

```bash filename=".env" copy
OPENAI_API_KEY=your_openai_api_key
```

---

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’Mastraã«ç™»éŒ²ã™ã‚‹

ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã§ã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¾ã™ï¼š

```ts copy filename="src/mastra/index.ts"
import { Mastra } from "@mastra/core";

import { chefAgent } from "./agents/chefAgent";

export const mastra = new Mastra({
  agents: { chefAgent },
});
```

---

</Steps >

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®å¯¾è©±

<Steps>
### ãƒ†ã‚­ã‚¹ãƒˆå¿œç­”ã®ç”Ÿæˆ

```ts copy filename="src/index.ts"
async function main() {
  const query =
    "In my kitchen I have: pasta, canned tomatoes, garlic, olive oil, and some dried herbs (basil and oregano). What can I make?";
  console.log(`Query: ${query}`);

  const response = await chefAgent.generate([{ role: "user", content: query }]);
  console.log("\nğŸ‘¨â€ğŸ³ Chef Michel:", response.text);
}

main();
```

ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```bash copy
npx bun src/index.ts
```

å‡ºåŠ›ï¼š

```
Query: In my kitchen I have: pasta, canned tomatoes, garlic, olive oil, and some dried herbs (basil and oregano). What can I make?

ğŸ‘¨â€ğŸ³ Chef Michel: You can make a delicious pasta al pomodoro! Here's how...
```

---

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°

```ts copy filename="src/index.ts"
async function main() {
  const query =
    "Now I'm over at my friend's house, and they have: chicken thighs, coconut milk, sweet potatoes, and some curry powder.";
  console.log(`Query: ${query}`);

  const stream = await chefAgent.stream([{ role: "user", content: query }]);

  console.log("\n Chef Michel: ");

  for await (const chunk of stream.textStream) {
    process.stdout.write(chunk);
  }

  console.log("\n\nâœ… Recipe complete!");
}

main();
```

å‡ºåŠ›ï¼š

```
Query: Now I'm over at my friend's house, and they have: chicken thighs, coconut milk, sweet potatoes, and some curry powder.

ğŸ‘¨â€ğŸ³ Chef Michel:
Great! You can make a comforting chicken curry...

âœ… Recipe complete!
```

---

### æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ãƒ¬ã‚·ãƒ”ã®ç”Ÿæˆ

```ts copy filename="src/index.ts"
import { z } from "zod";

async function main() {
  const query =
    "I want to make lasagna, can you generate a lasagna recipe for me?";
  console.log(`Query: ${query}`);

  // Define the Zod schema
  const schema = z.object({
    ingredients: z.array(
      z.object({
        name: z.string(),
        amount: z.string(),
      }),
    ),
    steps: z.array(z.string()),
  });

  const response = await chefAgent.generate(
    [{ role: "user", content: query }],
    { output: schema },
  );
  console.log("\nğŸ‘¨â€ğŸ³ Chef Michel:", response.object);
}

main();
```

å‡ºåŠ›ï¼š

```
Query: I want to make lasagna, can you generate a lasagna recipe for me?

ğŸ‘¨â€ğŸ³ Chef Michel: {
  ingredients: [
    { name: "Lasagna noodles", amount: "12 sheets" },
    { name: "Ground beef", amount: "1 pound" },
    // ...
  ],
  steps: [
    "Preheat oven to 375Â°F (190Â°C).",
    "Cook the lasagna noodles according to package instructions.",
    // ...
  ]
}
```

---

</Steps >

## ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚µãƒ¼ãƒãƒ¼ã®å®Ÿè¡Œ

<Steps>

### `mastra dev`ã®ä½¿ç”¨

`mastra dev`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦å®Ÿè¡Œã§ãã¾ã™ï¼š

```bash copy
mastra dev
```

ã“ã‚Œã«ã‚ˆã‚Šã€ç™»éŒ²ã•ã‚ŒãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å¯¾è©±ã™ã‚‹ãŸã‚ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å…¬é–‹ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã™ã€‚

### ã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆAPIã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€`mastra dev`ã¯`http://localhost:4111`ã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ã‚·ã‚§ãƒ•ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ä»¥ä¸‹ã®URLã§åˆ©ç”¨å¯èƒ½ã§ã™ï¼š

```
POST http://localhost:4111/api/agents/chefAgent/generate
```

### `curl`ã‚’ä½¿ç”¨ã—ãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®å¯¾è©±

ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰`curl`ã‚’ä½¿ç”¨ã—ã¦ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨å¯¾è©±ã§ãã¾ã™ï¼š

```bash copy
curl -X POST http://localhost:4111/api/agents/chefAgent/generate \
  -H "Content-Type: application/json" \
  -d '{
    "messages": [
      {
        "role": "user",
        "content": "I have eggs, flour, and milk. What can I make?"
      }
    ]
  }'
```

**ã‚µãƒ³ãƒ—ãƒ«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼š**

```json
{
  "text": "You can make delicious pancakes! Here's a simple recipe..."
}
```

</Steps>
